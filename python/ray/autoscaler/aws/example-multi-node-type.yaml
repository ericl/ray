# Experimental: an example of configuring a mixed-node-type cluster.
cluster_name: multi_node_type
min_workers: 1
max_workers: 40

# Cloud-provider specific configuration.
provider:
    type: aws
    region: us-west-2
    availability_zone: us-west-2a

# Tell the autoscaler the allowed node types and the resources they provide.
# The key is the name of the node type, which is just for debugging purposes.
# The node config specifies the launch config and physical instance type.
available_node_types:
    m4.xl_ondemand:
        node_config:
            InstanceType: m4.xlarge
            ImageId: latest_dlami
        resources: {"CPU": 4}
        max_workers: 5
    m4.xl_spot:
        node_config:
            InstanceType: m4.xlarge
            ImageId: latest_dlami
            InstanceMarketOptions:
                MarketType: spot
        resources: {"CPU": 4}
        max_workers: 20
    m4.4xl:
        node_config:
            InstanceType: m4.4xlarge
            ImageId: latest_dlami
        resources: {"CPU": 16, "Custom1": 1}
        max_workers: 10
    p2.xl:
        node_config:
            InstanceType: p2.xlarge
            ImageId: latest_dlami
        resources: {"CPU": 4, "GPU": 1, "Custom2": 2}
        max_workers: 4
    p2.8xl:
        node_config:
            InstanceType: p2.8xlarge
            ImageId: latest_dlami
        resources: {"CPU": 32, "GPU": 8}
        max_workers: 2

# Specify the node type of the head node (as configured above).
head_node_type: m4.xl_ondemand

# Specify the default type of the worker node (as configured above).
worker_default_node_type: m4.xl_spot

# Configure the cluster for very conservative auto-scaling otherwise.
target_utilization_fraction: 1.0
idle_timeout_minutes: 2

# How Ray will authenticate with newly launched nodes.
auth:
    ssh_user: ubuntu
